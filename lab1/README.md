# Лабораторная работа №1

## Описание

В рамках лабораторной работы №1 была разработана программная система для управления торговым центром с использованием объектно-ориентированного подхода. Система реализует:

- Управление магазинами, товарами, покупателями, продавцами и акциями.
- Поиск товаров по названию и категории, совершение покупок, оформление возвратов.
- Применение акций, аренду торговых площадей, оценку сервиса продавцов.
- Отправку оповещений посетителям через интерфейс администратора.
- Сохранение состояния системы между запусками (имитация через инициализацию данных).

Система разработана с использованием интерфейса командной строки (CLI) и соответствует принципам SOLID.

## Сценарий разработки проекта

### 1. Постановка задачи

Программная система должна уметь:

- Хранить информацию о торговом центре (ТЦ), включая магазины, товары, продавцов, покупателей, акции и галереи.
- Позволять администратору:
  - Просматривать список магазинов и текущие акции.
  - Искать товары по названию или категории.
  - Просматривать детали товаров с учетом их характеристик.
  - Совершать покупки от имени покупателя, выбирая продавца.
  - Применять акции к покупкам.
  - Арендовать торговые площади для новых магазинов.
  - Оценивать сервис продавцов.
  - Отправлять оповещения посетителям.
  - Обрабатывать возвраты товаров с учетом политики магазина.
  - Менять текущего покупателя.
- Сохранять состояние системы между запусками (реализовано через инициализацию данных при старте).
- Обрабатывать ошибочные ситуации с использованием исключений.
- Предоставлять интерфейс командной строки (CLI) для взаимодействия с системой.

### 2. Объектно-ориентированный анализ и проектирование

#### Анализ предметной области
Предметная область — управление торговым центром. Основные сущности:
- ShoppingMall: Торговый центр, содержащий магазины, галереи и акции.
- Shop: Магазин с товарами, продавцами, кассами и политикой возврата.
- Product: Товар с характеристиками, ценой, количеством и категорией.
- Customer: Покупатель с балансом, покупками и вопросами.
- Seller: Продавец, который отвечает на вопросы и обрабатывает возвраты.
- Promotion: Акция с названием, описанием и скидкой.
- Gallery: Галерея внутри ТЦ, содержащая магазины.
- CashRegister: Касса для обработки платежей.

#### Диаграмма состояний
Диаграмма состояний системы описывает жизненный цикл покупки:
1. Начало: Покупатель выбирает товар.
2. Поиск товара: Система ищет товар по названию или категории.
3. Покупка:
   - Проверка наличия товара.
   - Проверка баланса покупателя.
   - Обработка платежа через кассу.
   - Успех: товар списывается, покупка добавляется в историю.
   - Ошибка: недостаточно средств или товара.
4. Применение акции (опционально): Скидка применяется к покупке.
5. Возврат:
   - Проверка политики возврата магазина.
   - Проверка срока возврата.
   - Успех: товар возвращается, деньги зачисляются обратно.
   - Ошибка: срок возврата истек или возврат не предусмотрен.
6. Оценка сервиса: Покупатель оценивает продавца.

#### Диаграмма классов
Классы спроектированы с учетом принципов SOLID:
- Single Responsibility Principle (SRP): Каждый класс отвечает за одну задачу (например, PurchaseOperation только за покупки, ReturnOperation только за возвраты).
- Open/Closed Principle (OCP): Классы открыты для расширения (например, добавление новых типов акций в PromotionOperation).
- Liskov Substitution Principle (LSP): Подклассы (например, Seller) могут заменять базовые классы без нарушения функциональности.
- Interface Segregation Principle (ISP): Классы используют только те методы, которые им нужны.
- Dependency Inversion Principle (DIP): Высокоуровневые модули (например, AdminInterface) зависят от абстракций, а не от конкретных реализаций.

### 3. Выбор технологий

- Язык программирования: Python.
- Интерфейс: Командная строка (CLI).
- Библиотеки: Стандартная библиотека Python (time для работы с датами).

Причины выбора:
- Python прост в использовании и хорошо подходит для учебных проектов.
- CLI обеспечивает удобный и быстрый доступ к функциональности без необходимости разработки графического интерфейса.

### 4. Планирование интерфейса

Проект состоит из нескольких файлов, каждый из которых отвечает за определенную часть функциональности:

- Основные сущности:
  - entities.py — содержит классы ShoppingMall, Shop, Product, Customer, Seller, Promotion, Gallery, CashRegister.
- Операции:
  - operations.py — содержит классы для операций: ProductSearch, PurchaseOperation, ReturnOperation, PromotionOperation, RentOperation, ServiceRating.
- Интерфейс администратора:
  - admin_interface.py — содержит класс AdminInterface для взаимодействия с пользователем через CLI.
- Запуск приложения:
  - main.py — точка входа, инициализация данных торгового центра.
- Тесты:
  - test_mall.py — unit-тесты для проверки функциональности системы (будет добавлен в репозитории).

### 5. Объяснение работы основных функций

- **entities.py**
  - Класс ShoppingMall управляет магазинами, галереями и акциями.
  - Класс Shop хранит информацию о товарах, продавцах и политике возврата.
  - Класс Seller обрабатывает возвраты и отвечает на вопросы покупателей.
  - Класс Customer хранит историю покупок и баланс.
- **operations.py**
  - ProductSearch: Реализует поиск товаров по названию и категории.
  - PurchaseOperation: Выполняет покупку с проверкой баланса и наличия товара.
  - ReturnOperation: Обрабатывает возврат с учетом политики магазина и срока.
  - PromotionOperation: Применяет скидки к покупкам.
  - RentOperation: Оформляет аренду торговых площадей.
  - ServiceRating: Обновляет рейтинг продавцов.
- **admin_interface.py**
  - Класс AdminInterface предоставляет CLI-меню с командами для управления ТЦ.
  - Реализованы функции поиска, покупки, возврата, аренды и оценкиmain.py **main.py**
  - Инициализирует торговый центр с тестовыми данными: магазинами, товарами, продавцами и акциями.

### 6. Осуществление работы программы

1. Запустите приложение с помощью python main.py.
2. Выберите команды из меню администратора:
   - Используйте "1" для просмотра магазинов.
   - Используйте "3" для поиска товаров (например, "Стиральная машина LG").
   - Совершите покупку через "5", выбрав товар и продавца.
   - Примените акцию через "6".
   - Оформите возврат через "11".
   - Оцените сервис через "8".
3. Для аренды пространства выберите "7" и добавьте новый магазин.

## 7. Итоги

В ходе лабораторной работы была разработана полнофункциональная CLI-система для управления торговым центром. Программа соответствует требованиям задания:
- Использованы принципы SOLID при проектировании классов.
- Реализован интерфейс командной строки для удобного взаимодействия.
- Обработаны ошибочные ситуации с помощью исключений.
- Сохранение состояния имитировано через инициализацию данных.
- Код написан в соответствии с PEP8 и включает аннотацию типов.

Особое внимание было уделено:
- Гибкости поиска товаров и применения акций.
- Надежности обработки возвратов с учетом политики магазина.
- Удобству интерфейса для администратора.

Система может быть расширена дополнительными функциями, такими как сохранение данных в файл или добавление новых типов акций.
