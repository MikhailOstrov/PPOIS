# Лабораторная работа №2

## Описание

В рамках лабораторной работы было разработано оконное приложение с использованием шаблона проектирования Model-View-Controller (MVC). Приложение реализует следующие функции:

- Хранение данных о преподавателях (название кафедры, ФИО, ученое звание, ученая степень, стаж работы).
- Обработку данных (добавление, поиск, удаление).
- Поиск и удаление записей в массиве данных с учетом заданных условий.
- Постраничное отображение данных.
- Сохранение и загрузка данных в формате XML с использованием DOM и SAX парсеров.

## Сценарий разработки проекта

### 1. Постановка задачи

Приложение должно уметь:

- Формировать массив записей путем ввода данных через диалоговые окна.
- Осуществлять поиск записей в массиве по указанным условиям в отдельном диалоговом окне. Результаты поиска должны выводиться в этом же окне с помощью стандартных элементов управления.
- Удалять записи из массива по условиям, указанным в отдельном диалоговом окне. Условия удаления должны вводиться отдельно от условий поиска. Пользователь должен быть уведомлен о том, были ли удалены записи, сколько было удалено, или о том, что такие записи не найдены.
- Отображать весь массив записей в главном окне приложения в виде таблицы и дерева.
- Сохранять и загружать массив записей из указываемого пользователем файла с помощью стандартных диалогов сохранения/загрузки. Данные должны сохраняться в формате XML. Для записи используется DOM парсер, для чтения — SAX парсер.
- Использовать правильные типы данных (например, стаж работы — целое число).
- Вывод записей в главном окне и в диалоге поиска должен осуществляться постранично. Приложение должно поддерживать:
  - Переход между страницами (первая, последняя, следующая, предыдущая).
  - Показ текущего номера страницы, общего числа записей и страниц.
  - Возможность изменения количества записей на странице.
- Условия для поиска:
  - По ФИО преподавателя (частичное совпадение).
  - По ученому званию и факультету.
  - По стажу работы (задается верхний и нижний предел).
- Условия для удаления:
  - По списку названий кафедр.
  - По списку ученых степеней.
  - По списку ученых званий и стажу (минимальный стаж).

### 2. Выбор технологий

- Язык программирования: Python.
- Библиотека для создания графического интерфейса: `tkinter`.
- База данных: SQLite для хранения данных.
- Для записи в XML использовался DOM парсер (`xml.dom.minidom`), для чтения — SAX парсер (`xml.sax`).

Причины выбора технологий:

- `tkinter` — стандартная библиотека Python для создания графических интерфейсов, простая в использовании и подходящая для учебных проектов.
- SQLite — легковесная база данных, не требующая отдельного сервера, что идеально для небольших приложений.
- DOM и SAX парсеры обеспечивают надежную работу с XML, соответствуя требованиям задания.

### 3. Планирование интерфейса

Проект состоит из нескольких файлов, каждый из которых отвечает за определенную часть функциональности в соответствии с шаблоном MVC:

- Главное окно и общее представление:
  - `view.py` — содержит класс `TeacherView`, реализующий главное окно приложения с таблицей, древовидным представлением и элементами пагинации.
- Диалоговые окна:
  - `dialogs.py` — содержит классы диалогов:
    - `AddDialog` — диалог для добавления преподавателя.
    - `SearchDialog` — диалог для поиска преподавателей.
    - `DeleteDialog` — диалог для удаления преподавателей с отображением результатов в виде списка.
- Модель данных:
  - `model.py` — содержит класс `TeacherModel`, отвечающий за работу с базой данных и XML.
  - Контроллер:
  - controller.py — содержит класс TeacherController, связывающий модель и представление.
- Запуск приложения:
  - main.py — точка входа в приложение.
- Тестовые данные:
  - sample_data.xml — пример XML-файла с данными о преподавателях.

### 4. Объяснение работы основных функций

- **model.py**
  - Класс TeacherModel отвечает за работу с данными: создание таблицы в SQLite, добавление, поиск, удаление записей, а также сохранение и загрузку данных в XML. Метод search_teachers реализует поиск с учетом условий (ФИО, звание и факультет, стаж), а метод delete_teachers — удаление по заданным спискам.
- **view.py**
  - Класс TeacherView создает главное окно приложения с меню, панелью инструментов, таблицей, древовидным представлением и пагинацией. Методы update_table и update_tree обновляют отображение данных.
- **dialogs.py**
  - AddDialog: Позволяет добавить нового преподавателя, с проверкой корректности ввода (например, стаж должен быть числом).
  - SearchDialog: Реализует поиск с тремя условиями. Если одно из условий не задано, поиск выполняется по имеющимся данным.
  - DeleteDialog: Реализует удаление по спискам кафедр, степеней, званий и минимальному стажу. Результаты удаления отображаются в списке.
- **controller.py**
  - Класс TeacherController связывает модель и представление, управляет обновлением данных и вызовом диалогов. Метод set_page обеспечиваmain.pyю.
- **main.py**
  - Инициализирует приложение, создает объекты модели, представления и контроллера, и запускает главный цикл.

### 5. Запуск и файлы для тестирования

Для запуска приложения выполните команды:

python main.py  # Запуск основного окна
Для тестования приложения предоставлен файл sample_data.xml. Вы можете загрузить его через меню "File -> Load from XML". Для демонстрации рекомендуется добавить минимум 50 записей в sample_data.xml.

Пример записи в sample_data.xml:

<teacher id="1">
    <department>Физика</department>
    <full_name>Иванов Петр Сергеевич</full_name>
    <academic_title>Преподаватель</academic_title>
    <academic_degree>Доктор Наук</academic_degree>
    <work_experience>13</work_experience>
</teacher>

### 6. Осуществление работы программы

1. Запустите приложение с помощью python main.py.
2. Используйте меню "File -> Load from XML" для загрузки данных из sample_data.xml.
3. Добавьте новых преподавателей через "Actions -> Add Teacher".
4. Выполните поиск через "Actions -> Search Teachers" с различными условиями.
5. Удалите записи через "Actions -> Delete Teachers" и проверьте результаты в диалоговом окне.

## 7. Итоги

В ходе лабораторной работы было разработано полнофункциональное оконное приложение для управления базой данных преподавателей. Программа обладает удобным графическим интерфейсом, обеспечивающим легкую навигацию и комфортную работу пользователя.

Особое внимание было уделено:
- Корректности ввода данных: реализованы проверки (например, стаж должен быть неотрицательным числом).
- Гибкости поиска и удаления: поддерживаются сложные условия, такие как частичное совпадение ФИО и диапазон стажа.
- Надежности хранения данных: использование SQLite и XML с DOM/SAX парсерами.

Приложение полностью соответствует требованиям задания и может быть использовано как основа для более сложных систем управления данными.
